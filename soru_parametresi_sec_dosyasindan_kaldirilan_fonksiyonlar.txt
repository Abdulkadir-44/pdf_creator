# def display_images(self, parent_frame):
    #     """Görselleri sayfa sayfa PDF şablonunda göster"""
    #     self.logger.debug("Görseller display edilmeye başlanıyor")
        
    #     # Soru tipine göre sayfa başı soru sayısı
    #     sorular_per_sayfa = self._get_sorular_per_sayfa()
    #     toplam_sayfa = math.ceil(len(self.secilen_gorseller) / sorular_per_sayfa)
        
    #     self.logger.debug(f"Sayfa başı soru: {sorular_per_sayfa}, Toplam sayfa: {toplam_sayfa}")
 
    #     if not hasattr(self, 'current_page'):
    #         self.current_page = 0
 
    #     # Sayfa navigasyon butonları
    #     nav_frame = ctk.CTkFrame(parent_frame, fg_color="transparent")
    #     nav_frame.pack(pady=10, fill="x")
 
    #     if toplam_sayfa > 1:
    #         # Önceki sayfa butonu
    #         if self.current_page > 0:
    #             prev_btn = ctk.CTkButton(
    #                 nav_frame,
    #                 text="← Önceki Sayfa",
    #                 command=lambda: self.change_page(parent_frame, -1),
    #                 width=120
    #             )
    #             prev_btn.pack(side="left", padx=10)
 
    #         # Sayfa bilgisi
    #         page_info = ctk.CTkLabel(
    #             nav_frame,
    #             text=f"Sayfa {self.current_page + 1} / {toplam_sayfa}",
    #             font=ctk.CTkFont(size=14, weight="bold")
    #         )
    #         page_info.pack(side="left", padx=20)
 
    #         # Sonraki sayfa butonu
    #         if self.current_page < toplam_sayfa - 1:
    #             next_btn = ctk.CTkButton(
    #                 nav_frame,
    #                 text="Sonraki Sayfa →",
    #                 command=lambda: self.change_page(parent_frame, 1),
    #                 width=120
    #             )
    #             next_btn.pack(side="left", padx=10)
 
    #     # Mevcut sayfa için görselleri al
    #     start_idx = self.current_page * sorular_per_sayfa
    #     end_idx = min(start_idx + sorular_per_sayfa, len(self.secilen_gorseller))
    #     sayfa_gorselleri = self.secilen_gorseller[start_idx:end_idx]

    #     self.logger.debug(f"Sayfa {self.current_page + 1} için {len(sayfa_gorselleri)} görsel gösteriliyor")
 
    #     # PDF sayfası önizlemesi oluştur
    #     pdf_preview = self.create_page_preview(sayfa_gorselleri, start_idx)
 
    #     if pdf_preview:
    #         # Ana container - PDF ve butonları yan yana yerleştirmek için
    #         main_container = ctk.CTkFrame(parent_frame, fg_color="transparent")
    #         main_container.pack(pady=20, padx=10, fill="both", expand=True)
 
    #         # PDF önizleme container (sol taraf)
    #         preview_container = ctk.CTkFrame(main_container, fg_color="#d1d1d1", corner_radius=10)
    #         preview_container.pack(side="left", fill="both", expand=True, padx=(0, 10))
 
    #         # PDF görselini göster
    #         pdf_label = tk.Label(
    #             preview_container,
    #             image=pdf_preview,
    #             bg="#d1d1d1"
    #         )
    #         pdf_label.image = pdf_preview  # Referansı koru
    #         pdf_label.pack(pady=20)
 
    #         # Butonlar container (sağ taraf)
    #         buttons_container = ctk.CTkFrame(main_container, fg_color="#f8f9fa", corner_radius=10, width=250)
    #         buttons_container.pack(side="right", fill="y", padx=(10, 0))
    #         buttons_container.pack_propagate(False)  # Sabit genişlik için
 
    #         # Her soru için butonlar
    #         self.create_question_buttons_vertical(buttons_container, sayfa_gorselleri, start_idx, parent_frame)
    #     else:
    #         self.logger.error("PDF önizlemesi oluşturulamadı")
    
    # def change_page(self, parent_frame, direction):
    #     """Sayfa değiştir"""
    #     sorular_per_sayfa = self._get_sorular_per_sayfa()
    #     toplam_sayfa = math.ceil(len(self.secilen_gorseller) / sorular_per_sayfa)

    #     new_page = self.current_page + direction
    #     if 0 <= new_page < toplam_sayfa:
    #         old_page = self.current_page
    #         self.current_page = new_page
    #         self.logger.debug(f"Sayfa değiştirildi: {old_page + 1} -> {new_page + 1}")

    #         # Sayfayı yenile
    #         for widget in parent_frame.winfo_children():
    #             widget.destroy()

    #         self.display_images(parent_frame)

    # def create_question_buttons_vertical(self, parent_container, sayfa_gorselleri, start_idx, main_parent_frame):
    #     """Soruların yanında dikey olarak butonlar oluştur"""
    #     self.logger.debug(f"{len(sayfa_gorselleri)} soru için butonlar oluşturuluyor")
        
    #     # Başlık
    #     title_label = ctk.CTkLabel(
    #         parent_container,
    #         text="Soru İşlemleri",
    #         font=ctk.CTkFont(size=16, weight="bold"),
    #         text_color="#495057"
    #     )
    #     title_label.pack(pady=(20, 10))

    #     # Scrollable frame butonlar için
    #     scrollable_buttons = ctk.CTkScrollableFrame(
    #         parent_container,
    #         fg_color="transparent",
    #         corner_radius=0
    #     )
    #     scrollable_buttons.pack(fill="both", expand=True, padx=10, pady=(0, 20))

    #     # Her soru için buton grubu
    #     for i, gorsel_path in enumerate(sayfa_gorselleri):
    #         # Her soru için frame
    #         question_frame = ctk.CTkFrame(scrollable_buttons, fg_color="#ffffff", corner_radius=8)
    #         question_frame.pack(fill="x", pady=5, padx=5)

    #         # Soru numarası ve bilgisi
    #         soru_no = start_idx + i + 1
    #         try:
    #             cevap = get_answer_for_image(gorsel_path)
    #             self.logger.debug(f"Soru {soru_no} cevabı alındı: {cevap}")
    #         except Exception as e:
    #             cevap = "?"
    #             self.logger.warning(f"Soru {soru_no} cevabı alınamadı: {e}")

    #         # Soru bilgisi
    #         info_label = ctk.CTkLabel(
    #             question_frame,
    #             text=f"Soru {soru_no}",
    #             font=ctk.CTkFont(size=14, weight="bold"),
    #             text_color="#2c3e50"
    #         )
    #         info_label.pack(pady=(10, 5))

    #         # Cevap bilgisi
    #         answer_label = ctk.CTkLabel(
    #             question_frame,
    #             text=f"Cevap: {cevap}",
    #             font=ctk.CTkFont(size=12),
    #             text_color="#7f8c8d"
    #         )
    #         answer_label.pack(pady=(0, 10))

    #         # Butonlar için frame
    #         btn_frame = ctk.CTkFrame(question_frame, fg_color="transparent")
    #         btn_frame.pack(pady=(0, 10))

    #         # Güncelle butonu
    #         update_btn = ctk.CTkButton(
    #             btn_frame,
    #             text="Güncelle",
    #             width=80, height=30,
    #             font=ctk.CTkFont(size=11),
    #             fg_color="#3498db",
    #             hover_color="#2980b9",
    #             command=lambda idx=start_idx+i: self.gorseli_guncelle(idx, main_parent_frame)
    #         )
    #         update_btn.pack(side="left", padx=(0, 5))

    #         # Sil butonu
    #         remove_btn = ctk.CTkButton(
    #             btn_frame,
    #             text="Sil",
    #             width=60, height=30,
    #             font=ctk.CTkFont(size=11),
    #             fg_color="#e74c3c",
    #             hover_color="#c0392b",
    #             command=lambda idx=start_idx+i: self.gorseli_kaldir(idx, main_parent_frame)
    #         )
    #         remove_btn.pack(side="left", padx=(5, 0))


# def guncelle_bilgi_etiketi(self):
    #     """Bilgi etiketindeki soru sayısını güncelle"""
    #     try:
    #         # form_frame'deki ikinci widget'ı bul (info_label)
    #         widgets = self.form_frame.winfo_children()
    #         if len(widgets) >= 2:
    #             info_widget = widgets[1]  # İkinci widget bilgi etiketi olmalı
    #             if hasattr(info_widget, 'configure'):
    #                 yeni_bilgi = self.create_info_text()
    #                 info_widget.configure(text=yeni_bilgi)
    #                 self.logger.debug("Bilgi etiketi güncellendi")
    #     except Exception as e:
    #         self.logger.error(f"Bilgi etiketi güncelleme hatası: {e}")


# def create_info_text(self):
    #     """Bilgi metnini oluştur"""
    #     try:
    #         soru_tipi = self.soru_tipi_var.get()
    #         zorluk = self.zorluk_var.get()
            
    #         # Konu dağılımı metni
    #         dagilim_parts = []
    #         for konu, sayi in self.konu_soru_dagilimi.items():
    #             if len(konu) > 15:
    #                 konu_kisaltma = konu[:12] + "..."
    #             else:
    #                 konu_kisaltma = konu
    #             dagilim_parts.append(f"{konu_kisaltma}({sayi})")
            
    #         dagilim_text = ", ".join(dagilim_parts)
    #         toplam = sum(self.konu_soru_dagilimi.values())
            
    #         return f"{self.ders_adi} | {soru_tipi} | {zorluk} | Toplam {toplam} soru: {dagilim_text}"
    #     except Exception as e:
    #         self.logger.error(f"Bilgi metni oluşturma hatası: {e}")
    #         return f"{self.ders_adi} | {len(self.secilen_gorseller)} soru"

    # def gorseli_kaldir(self, index, parent_frame):
    #     """Seçilen görseli listeden kaldır ve önizlemeyi güncelle"""
    #     try:
    #         # Görseli listeden kaldır
    #         if 0 <= index < len(self.secilen_gorseller):
    #             kaldirilan_gorsel = self.secilen_gorseller.pop(index)
    #             self.logger.info(f"Görsel kaldırıldı: {os.path.basename(kaldirilan_gorsel)} (Index: {index})")

    #             # Eğer hiç görsel kalmadıysa uyarı göster
    #             if not self.secilen_gorseller:
    #                 self.logger.warning("Tüm görseller kaldırıldı")
    #                 self.show_notification(
    #                     "Uyarı",
    #                     "Tüm görseller kaldırıldı!\nYeni seçim yapmak için 'Geri' butonuna tıklayın.",
    #                     geri_don=False 
    #                 )
    #                 return

    #             # Önizlemeyi güncelle
    #             for widget in parent_frame.winfo_children():
    #                 widget.destroy()

    #             # Sayfa kontrolü yap
    #             sorular_per_sayfa = self._get_sorular_per_sayfa()
    #             toplam_sayfa = math.ceil(len(self.secilen_gorseller) / sorular_per_sayfa)
    #             if hasattr(self, 'current_page') and self.current_page >= toplam_sayfa:
    #                 self.current_page = max(0, toplam_sayfa - 1)

    #             self.display_images(parent_frame)
    #             self.guncelle_bilgi_etiketi()

    #     except Exception as e:
    #         self.logger.error(f"Görsel kaldırma hatası: {e}")
    #         self.show_error("Görsel kaldırılırken bir hata oluştu!")

    # def gorseli_guncelle(self, index, parent_frame):
    #     """Seçilen görseli güncelle"""
    #     try:
    #         self.logger.debug(f"Görsel güncelleniyor: Index {index}")
            
    #         if 0 <= index < len(self.secilen_gorseller):
    #             # Mevcut görselin hangi konudan geldiğini bul
    #             mevcut_gorsel_path = self.secilen_gorseller[index]
    #             mevcut_konu = self.find_topic_from_path(mevcut_gorsel_path)
                
    #             if not mevcut_konu:
    #                 self.show_error("Görselin hangi konudan geldiği bulunamadı!")
    #                 return

    #             # Aynı konudan farklı bir görsel seç
    #             soru_tipi = self.soru_tipi_var.get()
    #             zorluk = self.zorluk_var.get()
    #             konu_path = self.secilen_konular[mevcut_konu]
    #             klasor_yolu = os.path.join(konu_path, soru_tipi.lower(), zorluk.lower())

    #             # Klasördeki tüm görselleri al
    #             tum_gorseller = [f for f in os.listdir(klasor_yolu) 
    #                            if f.lower().endswith(('.png', '.jpg', '.jpeg', '.gif', '.bmp'))]

    #             if not tum_gorseller:
    #                 self.show_error("Güncellenecek görsel bulunamadı!")
    #                 return

    #             # Mevcut seçili görsellerin dosya adlarını al
    #             secili_gorsel_adlari = [os.path.basename(g) for g in self.secilen_gorseller]

    #             # Kullanılabilir görseller (seçili olmayanlar)
    #             kullanilabilir_gorseller = [
    #                 os.path.join(klasor_yolu, f) for f in tum_gorseller 
    #                 if f not in secili_gorsel_adlari
    #             ]

    #             if not kullanilabilir_gorseller:
    #                 self.show_error("Güncellenecek başka görsel kalmadı!")
    #                 return

    #             # Rastgele yeni bir görsel seç
    #             import random
    #             eski_gorsel = os.path.basename(self.secilen_gorseller[index])
    #             yeni_gorsel = random.choice(kullanilabilir_gorseller)
    #             yeni_gorsel_ad = os.path.basename(yeni_gorsel)

    #             # Görseli güncelle
    #             self.secilen_gorseller[index] = yeni_gorsel
    #             self.logger.info(f"Görsel güncellendi: {eski_gorsel} -> {yeni_gorsel_ad}")

    #             # Önizlemeyi yenile
    #             for widget in parent_frame.winfo_children():
    #                 widget.destroy()

    #             self.display_images(parent_frame)

    #     except Exception as e:
    #         self.logger.error(f"Görsel güncelleme hatası: {e}")
    #         self.show_error("Görsel güncellerken bir hata oluştu!")


# def create_question_distribution(self):
    #     """Her konu için soru sayısı seçimi"""
    #     dist_label = ctk.CTkLabel(
    #         self.form_frame, 
    #         text="Konu Başına Soru Sayısı:",
    #         font=ctk.CTkFont(family="Segoe UI", size=16, weight="bold"),
    #         text_color="#495057"
    #     )
    #     dist_label.pack(pady=(10, 10), anchor="w", padx=40)

    #     # Container for topics frame - sola dayalı ve genişliği sınırlı
    #     topics_container = ctk.CTkFrame(self.form_frame, fg_color="transparent")
    #     topics_container.pack(anchor="w", padx=40, pady=(0, 20))

    #     # Scrollable frame for topics - sabit genişlik
    #     self.topics_frame = ctk.CTkScrollableFrame(
    #         topics_container,
    #         fg_color="#ffffff",
    #         corner_radius=10,
    #         height=200,
    #         width=500
    #     )
    #     self.topics_frame.pack(anchor="w")

    #     self.konu_entry_vars = {}

    #     for konu_adi in self.secilen_konular.keys():
    #         # Her konu için frame - ikinci koddaki gibi
    #         konu_frame = ctk.CTkFrame(self.topics_frame, fg_color="transparent")
    #         konu_frame.pack(fill="x", pady=2, padx=5)  # İkinci koddaki gibi

    #         # Konu adı - kırmızı renk
    #         konu_label = ctk.CTkLabel(
    #             konu_frame,
    #             text=konu_adi,
    #             font=ctk.CTkFont(family="Segoe UI", size=14, weight="bold"),
    #             text_color="#e74c3c"
    #         )
    #         konu_label.pack(side="left", anchor="w")  # Width'i kaldırdım

    #         # Sağ taraf için container
    #         right_container = ctk.CTkFrame(konu_frame, fg_color="transparent")
    #         right_container.pack(side="right")

    #         # Soru sayısı girişi
    #         var = tk.StringVar(value="1")
    #         self.konu_entry_vars[konu_adi] = var

    #         entry = ctk.CTkEntry(
    #             right_container,
    #             textvariable=var,
    #             font=ctk.CTkFont(family="Segoe UI", size=14),
    #             width=60,
    #             height=35,
    #             corner_radius=8
    #         )
    #         entry.pack(side="right", padx=(10, 0))

    #         # Hızlı seçim butonları - mavi renk
    #         for num in [1, 2, 3, 5]:
    #             btn = ctk.CTkButton(
    #                 right_container,
    #                 text=str(num),
    #                 width=30,
    #                 height=30,
    #                 corner_radius=6,
    #                 fg_color="#3498db",
    #                 hover_color="#2980b9",
    #                 font=ctk.CTkFont(size=10),
    #                 command=lambda n=num, v=var: v.set(str(n))
    #             )
    #             btn.pack(side="right", padx=(0, 5))

    #     # Toplam soru sayısı gösterimi
    #     # self.create_total_display()
    
    # def update_total(self, *args):
    #     """Toplam soru sayısını güncelle"""
    #     try:
    #         toplam = 0
    #         for var in self.konu_entry_vars.values():
    #             try:
    #                 sayi = int(var.get())
    #                 if sayi > 0:
    #                     toplam += sayi
    #             except ValueError:
    #                 pass
            
    #         self.total_label.configure(text=f"Toplam Soru Sayısı: {toplam}")
    #     except Exception as e:
    #         self.logger.error(f"Toplam güncelleme hatası: {e}")

# def _darken_color(self, hex_color):
    #     """Rengi koyulaştır"""
    #     color_map = {
    #         "#27ae60": "#229954",
    #         "#e74c3c": "#c0392b",
    #         "#dc3545": "#c82333"
    #     }
    #     return color_map.get(hex_color, hex_color)
